<%@ page language="java" contentType="text/html; charset=UTF-8"
         pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <title></title>
    <link rel="stylesheet" type="text/css" href="css/base.css">
    <link rel="stylesheet" type="text/css" href="css/animate.css">
    <link rel="stylesheet" type="text/css" href="css/yst.css">

</head>
<body>
<div class="wrapper" id="canvansImg">
    <div class="part part1">
        <img src="images/f1-text.png" alt="" class="fl-text fadeInDownBig animated ">
    </div>
    <div class="part part2 wow bounceInUp" data-wow-duration="1s" data-wow-delay="1.5s" >
        <div class="f2-info f2-info1">
            <img src="images/f2-text.png" alt="" class="f2-text wow slideInLeft" data-wow-duration="1s" data-wow-delay="2.2s">
            <img src="images/f2-btn.png" alt="" class="f2-btn wow bounceIn" data-wow-duration="1s" data-wow-delay="2.5s" >
        </div>
        <div class="f2-info f2-info2">
            <img src="images/f3-text.png" alt="" class="f2-text wow slideInDown" data-wow-duration="1s" data-wow-delay=".4s">
            <input type="text" class="f2-input wow slideInLeft" data-wow-duration="1s" data-wow-delay=".8s">
            <img src="images/f3-btn.png" alt="" class="f2-btn wow bounceIn" data-wow-duration="1s" data-wow-delay=".8s" >
        </div>
        <img src="images/smallFlower.png" alt="" class="smallFlower slideInUp2">
        <img src="images/bigFlower.png" alt="" class="bigFlower slideInUp3">
    </div>
    <div class="part part3 wow bounceInUp" data-wow-duration="1s">
        <div class="qs-info">
            <img src="images/qs-tit1.png" alt="" class="qs-tit1 wow bounceInUp" data-wow-duration="1s" data-wow-delay=".8s">
            <div class="answer-con">
                <img src="images/qs1-a.png" alt="" class="answer wow fadeInDown" data-wow-duration="1.2s" data-wow-delay="2s">
                <img src="images/qs1-b.png" alt="" class="answer wow fadeInDown" data-wow-duration="1.2s" data-wow-delay="3s">
                <img src="images/qs1-c.png" alt="" class="answer wow fadeInDown" data-wow-duration="1.2s" data-wow-delay="4s">
            </div>
        </div>
        <div class="qs-info">
            <img src="images/qs-tit2.png" alt="" class="qs-tit1 wow bounceInUp" data-wow-duration="1s" data-wow-delay=".8s">
            <div class="answer-con">
                <img src="images/qs2-a.png" alt="" class="answer wow fadeInDown" data-wow-duration="1.2s" data-wow-delay="2s">
                <img src="images/qs2-b.png" alt="" class="answer wow fadeInDown" data-wow-duration="1.2s" data-wow-delay="3s">
                <img src="images/qs2-c.png" alt="" class="answer wow fadeInDown" data-wow-duration="1.2s" data-wow-delay="4s">
            </div>
        </div>
        <div class="qs-info">
            <img src="images/qs-tit3.png" alt="" class="qs-tit wow bounceInUp" data-wow-duration="1s" data-wow-delay=".8s">
            <div class="answer-con">
                <img src="images/qs3-a.png" alt="" class="answer wow fadeInDown" data-wow-duration="1.2s" data-wow-delay="2s">
                <img src="images/qs3-b.png" alt="" class="answer wow fadeInDown" data-wow-duration="1.2s" data-wow-delay="3s">
                <img src="images/qs3-c.png" alt="" class="answer wow fadeInDown" data-wow-duration="1.2s" data-wow-delay="4s">
            </div>
        </div>
        <div class="qs-info">
            <img src="images/qs-tit4.png" alt="" class="qs-tit wow bounceInUp" data-wow-duration="1s" data-wow-delay=".8s">
            <div class="answer-con">
                <img src="images/qs4-a.png" alt="" class="answer wow fadeInDown" data-wow-duration="1.2s" data-wow-delay="2s">
                <img src="images/qs4-b.png" alt="" class="answer wow fadeInDown" data-wow-duration="1.2s" data-wow-delay="3s">
                <img src="images/qs4-c.png" alt="" class="answer wow fadeInDown" data-wow-duration="1.2s" data-wow-delay="4s">
            </div>
        </div>
        <div class="qs-info">
            <img src="images/qs-tit5.png" alt="" class="qs-tit wow bounceInUp" data-wow-duration="1s" data-wow-delay=".8s">
            <div class="answer-con">
                <img src="images/qs5-a.png" alt="" class="answer wow fadeInDown" data-wow-duration="1.2s" data-wow-delay="2s">
                <img src="images/qs5-b.png" alt="" class="answer wow fadeInDown" data-wow-duration="1.2s" data-wow-delay="3s">
                <img src="images/qs5-c.png" alt="" class="answer wow fadeInDown" data-wow-duration="1.2s" data-wow-delay="4s">
            </div>
        </div>
    </div>
    <div class="part part4 rotateIn wow">
        <div class="result-con">
            <img src="images/result-tit1.png" alt="" class="resultTit fadeInDownBig wow" data-wow-duration="1s" data-wow-delay=".6s">
            <div class="progress-con">
                <div class="item fadeInDown wow" data-wow-duration="1s" data-wow-delay="1.8s">
                    <p class="progress-num">
                        <img src="images/0.png" alt="" class="imgNum">
                        <img src="images/1.png" alt="" class="imgNum">
                    </p>
                    <p class="progress-in">
                        <img src="images/progress-bg.png" alt="" class="progress-bg">
                        <img src="images/progress-bar.png" alt="" class="progress-bar">
                    </p>
                    <p class="progress-intro">
                        <img src="images/zh.png" alt="">
                    </p>
                </div>
                <div class="item fadeInDown wow" data-wow-duration="1s" data-wow-delay="2.5s">
                    <p class="progress-num">
                        <img src="images/2.png" alt="" class="imgNum">
                        <img src="images/5.png" alt="" class="imgNum">
                    </p>
                    <p class="progress-in">
                        <img src="images/progress-bg.png" alt="" class="progress-bg">
                        <img src="images/progress-bar.png" alt="" class="progress-bar">
                    </p>
                    <p class="progress-intro">
                        <img src="images/zh.png" alt="">
                    </p>
                </div>
                <div class="item fadeInDown wow" data-wow-duration="1s" data-wow-delay="3.5s">
                    <p class="progress-num">
                        <img src="images/9.png" alt="" class="imgNum">
                        <img src="images/5.png" alt="" class="imgNum">
                    </p>
                    <p class="progress-in">
                        <img src="images/progress-bg.png" alt="" class="progress-bg">
                        <img src="images/progress-bar.png" alt="" class="progress-bar">
                    </p>
                    <p class="progress-intro">
                        <img src="images/zh.png" alt="">
                    </p>
                </div>
            </div>
            <div class="result-intro fadeInUpBig wow" data-wow-duration="1s" data-wow-delay="4s">
                <img src="images/result-info1.png" alt="">
                <!-- <span onclick="domShot()">zdfdddfs</span> -->
            </div>
        </div>
    </div>
</div>
</body>

<script type="text/javascript" src="js/wow.js"></script>
<script type="text/javascript" src="http://m.5pao.com/js/jquery-1.8.3.js"></script>
<script type="text/javascript" src="js/html2canvas.js"></script>
<script type="text/javascript">
    $(function(){
        // 初始化动画
        var wow = new WOW({
            boxClass: 'wow',
            animateClass: 'animated',
            mobile: true,
            live: true
        });
        wow.init();

        // new WOW().init();

        // 从进入测试到开始测试
        $(".f2-btn").click(function(){
            $('.f2-info1').hide()
            $('.f2-info2').show()
        })

        // 从开始测试到问题页面
        $(".f2-info2 .f2-btn").click(function(){
            $('.part3').show()
            // $('.f2-info2').show()
        });

        // 问题页面板块的显示隐藏
        $(".answer-con img").click(function(){
            var answerLength = $(".answer-con").length
            var qsLength = $(this).parents(".qs-info").nextAll().length

            if(qsLength == 0 ){
                $(".part4").show()
            }else{
                $(this).parents(".qs-info").hide();
                $(this).parents(".qs-info").next().show();

            }
        });

        // 获取随机数
        function rnd(n, m){
            var random = Math.floor(Math.random()*(m-n+1)+n);
            return random;
        }

        var imgStr = ''
        $(".progress-in .progress-bar").each(function(){
            let barHeight = rnd(60,95)
            $(this).height(barHeight + "%")
            imgStr += barHeight
        })

        for( let i = 0; i<$(".imgNum").length; i++){
            $(".imgNum").eq(i-1).attr("src","images/"+imgStr.substr(i-1, 1)+".png")
        }



    });

    //保存图片
    function domShot() {
        html2canvas(document.querySelector("#canvansImg"),{
            windowWidth: document.body.scrollWidth,
            windowHeight: document.body.scrollHeight,
            x: 0,
            y: document.body.scrollTop, // 用网页滚动的高度定位y轴顶点
            height: $("#canvansImg").height(), //注意 下面解决当页面滚动之后生成图片出现白边问题
            width: $("#canvansImg").width(),  //注意 下面解决当页面滚动之后生成图片出现白边问题
        }).then(canvas => {
            const imgUrl = canvas.toDataURL('image/png');
            const imgWrap = "<img src="+imgUrl+">";
            $("<div class='canvasImgWrap'><div class='canvasImgMask'></div></div>").append(imgWrap).appendTo("body");
            promptWindow("长按图片保存");
        });
    }
</script>
</html>

